{% extends 'base.html' %}

{% block content %}
<p class="h2 text-center my-2">{{ _("Dinâmicas em Execução") }}</p>

{% if running_dynamics is defined and running_dynamics|length > 0 %}
{% for d in running_dynamics %}
<div class="card my-2">
  <div class="card-body">
    <div class="row">
      <div class="col my-auto">
        {{ _("Nome de Usuário") }}
        <p class="h5">{{ d.username }}</p>
      </div>
      <div class="col my-auto">
        {{ _("Proteína") }}
        <p class="h5">{{ d.protein }}</p>
      </div>
      <div class="col my-auto">
        {{ _("Tipo") }}
        <p class="h5 text-uppercase">{{ d.mode }}</p>
      </div>
      <div class="col-4 my-auto">
        {{ _("Iniciada em") }}
        <p class="h5 text-nowrap">{{ d.timestamp_format }}</p>
      </div>
      <div class="col my-auto">
        {{ _("Passo") }}
        <p class="h5">{{ d.step }}</p>
      </div>
    </div>
    <div class="row">
      <div class="col my-auto">
        {{ _("Localização em Disco") }}
        <p class="h5">{{ d.folder }}</p>
      </div>
      {% if not d['is_canceled'] or 'running' in d['status'] %}
      <form
        class="my-auto"
        method="POST"
        action="/cancel/{{ d['mode'] }}/{{ d['protein'] }}/{{ d['timestamp'] }}"
      >
        <button class="btn btn-danger">
          {{ _("Cancelar Dinâmica") }}
        </button>
      </form>
      {% endif %}
    </div>
  </div>
</div>
{% endfor %}
{% else %}
<div
  class="alert alert-info mt-4"
  role="alert"
>
  <h4 class="text-center">
    <i
      class="fa fa-circle-exclamation"
      aria-hidden="true"
    ></i> {{ _('Não há nenhuma dinâmica sendo executada.') }}
  </h4>
</div>
{% endif %}
{% endblock %}